<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>上传应用 - AppStore</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#165DFF',
            secondary: '#FF7D00',
            dark: '#1D2129',
            light: '#F2F3F5',
            muted: '#86909C'
          },
          fontFamily: {
            inter: ['Inter', 'system-ui', 'sans-serif'],
          },
        },
      }
    }
  </script>
  
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      .text-shadow {
        text-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }
      .card-hover {
        transition: all 0.3s ease;
      }
      .card-hover:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
      }
      .upload-area {
        border: 2px dashed #ccc;
        border-radius: 10px;
        padding: 2rem;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s ease;
      }
      .upload-area:hover {
        border-color: #165DFF;
        background-color: #f5f8ff;
      }
      .upload-area.active {
        border-color: #165DFF;
        background-color: #e8f0ff;
      }
    }
  </style>
</head>
<body class="font-inter bg-gray-50 text-dark">
  <!-- 导航栏 -->
  <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm sticky-top z-50">
    <div class="container-lg">
      <a class="navbar-brand text-primary font-bold text-xl" href="index.html">
        <i class="fa fa-apple mr-2"></i>AppStore
      </a>
      
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item">
            <a class="nav-link" href="index.html">首页</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="category.html">分类</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="top.html">排行榜</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="new.html">新品</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="recommend.html">推荐</a>
          </li>
        </ul>
        
        <div class="d-flex">
          <div class="input-group me-3">
            <input type="text" class="form-control rounded-start-pill" placeholder="搜索应用、游戏和更多" aria-label="Search">
            <button class="btn btn-outline-primary rounded-end-pill" type="button">
              <i class="fa fa-search"></i>
            </button>
          </div>
          
          <div class="dropdown me-3">
            <button class="btn btn-outline-primary rounded-pill px-4 dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
              <i class="fa fa-user-circle mr-1"></i>登录
            </button>
            <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
              <li><a class="dropdown-item" href="login.html">用户登录</a></li>
              <li><a class="dropdown-item" href="developer-login.html">开发者登录</a></li>
            </ul>
          </div>
          
          <a href="upload-app.html" class="btn btn-secondary rounded-pill px-4">
            <i class="fa fa-upload mr-1"></i>上传应用
          </a>
        </div>
      </div>
    </div>
  </nav>

  <!-- 主内容区 -->
  <main class="container-lg py-8">
    <div class="max-w-3xl mx-auto">
      <!-- 页面标题 -->
      <div class="text-center mb-8">
        <h1 class="text-3xl font-bold text-dark mb-2">上传新应用</h1>
        <p class="text-muted">填写以下信息，将你的应用提交到AppStore</p>
      </div>
      
      <!-- 上传表单 -->
      <div class="bg-white rounded-2xl shadow-sm p-6 mb-8">
        <form id="appUploadForm" class="space-y-6">
          <!-- 应用基本信息 -->
          <div class="space-y-4">
            <h2 class="text-xl font-bold text-dark">应用基本信息</h2>
            
            <div>
              <label for="appName" class="block text-sm font-medium text-dark mb-1">应用名称 <span class="text-red-500">*</span></label>
              <input type="text" id="appName" name="appName" class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary/50" placeholder="输入应用名称">
            </div>
            
            <div>
              <label for="appDescription" class="block text-sm font-medium text-dark mb-1">应用描述 <span class="text-red-500">*</span></label>
              <textarea id="appDescription" name="appDescription" rows="4" class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary/50" placeholder="描述你的应用功能和特点"></textarea>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label for="appCategory" class="block text-sm font-medium text-dark mb-1">应用分类 <span class="text-red-500">*</span></label>
                <select id="appCategory" name="appCategory" class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary/50">
                  <option value="">选择分类</option>
                  <option value="game">游戏</option>
                  <option value="education">教育</option>
                  <option value="productivity">生产力</option>
                  <option value="entertainment">娱乐</option>
                  <option value="health">健康</option>
                  <option value="lifestyle">生活方式</option>
                  <option value="music">音乐</option>
                  <option value="photography">摄影</option>
                  <option value="social">社交</option>
                  <option value="travel">旅行</option>
                  <option value="utilities">工具</option>
                  <option value="other">其他</option>
                </select>
              </div>
              
              <div>
                <label for="appPrice" class="block text-sm font-medium text-dark mb-1">价格 <span class="text-red-500">*</span></label>
                <div class="flex">
                  <span class="inline-flex items-center px-3 rounded-l-lg border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm">¥</span>
                  <input type="number" id="appPrice" name="appPrice" min="0" step="0.01" class="flex-1 px-4 py-2 rounded-r-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary/50" placeholder="0.00">
                  <div class="ml-2">
                    <label class="inline-flex items-center">
                      <input type="checkbox" id="appIsFree" name="appIsFree" class="form-checkbox h-5 w-5 text-primary rounded border-gray-300 focus:ring-primary">
                      <span class="ml-2 text-sm text-dark">免费</span>
                    </label>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- 应用资源上传 -->
          <div class="space-y-4">
            <h2 class="text-xl font-bold text-dark">应用资源</h2>
            
            <!-- 应用图标上传 -->
            <div>
              <label class="block text-sm font-medium text-dark mb-1">应用图标 <span class="text-red-500">*</span></label>
              <div class="upload-area" id="iconUploadArea">
                <input type="file" id="appIcon" name="appIcon" accept="image/*" class="hidden">
                <div class="flex flex-col items-center justify-center">
                  <i class="fa fa-cloud-upload text-4xl text-muted mb-2"></i>
                  <p class="text-muted mb-1">点击或拖拽图标到这里上传</p>
                  <p class="text-xs text-muted">推荐尺寸: 1024x1024px，支持 JPG, PNG 格式</p>
                </div>
                <div id="iconPreview" class="hidden mt-3">
                  <img id="iconPreviewImg" src="" alt="应用图标预览" class="max-w-full h-auto rounded-lg">
                </div>
              </div>
            </div>
            
            <!-- 应用文件上传 -->
            <div>
              <label class="block text-sm font-medium text-dark mb-1">应用文件 <span class="text-red-500">*</span></label>
              <div class="upload-area" id="appFileUploadArea">
                <input type="file" id="appFile" name="appFile" accept=".apk,.ipa,.appx" class="hidden">
                <div class="flex flex-col items-center justify-center">
                  <i class="fa fa-file-archive-o text-4xl text-muted mb-2"></i>
                  <p class="text-muted mb-1">点击或拖拽应用文件到这里上传</p>
                  <p class="text-xs text-muted">支持 APK (Android), IPA (iOS), appx, msix, msi (Windows)，pkg, dmg (macOS)格式</p>
                </div>
                <div id="appFilePreview" class="hidden mt-3">
                  <div class="flex items-center">
                    <i class="fa fa-file-archive-o text-2xl text-primary mr-3"></i>
                    <div>
                      <p id="appFileName" class="font-medium"></p>
                      <div class="w-full bg-gray-200 rounded-full h-2 mt-1">
                        <div id="appFileProgress" class="bg-primary h-2 rounded-full" style="width: 0%"></div>
                      </div>
                      <p id="appFileStatus" class="text-xs text-muted mt-1">准备上传</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- 应用截图上传 -->
            <div>
              <label class="block text-sm font-medium text-dark mb-1">应用截图 (至少上传1张) <span class="text-red-500">*</span></label>
              <div class="upload-area" id="screenshotsUploadArea">
                <input type="file" id="appScreenshots" name="appScreenshots" accept="image/*" multiple class="hidden">
                <div class="flex flex-col items-center justify-center">
                  <i class="fa fa-picture-o text-4xl text-muted mb-2"></i>
                  <p class="text-muted mb-1">点击或拖拽截图到这里上传</p>
                  <p class="text-xs text-muted">推荐尺寸: 1242x2688px，支持 JPG, PNG 格式，最多上传5张</p>
                </div>
                <div id="screenshotsPreview" class="hidden grid grid-cols-2 sm:grid-cols-3 gap-3 mt-3">
                  <!-- 截图预览将在这里动态生成 -->
                </div>
              </div>
            </div>
          </div>
          
          <!-- 应用信息 -->
          <div class="space-y-4">
            <h2 class="text-xl font-bold text-dark">应用信息</h2>
            
            <div>
              <label for="appVersion" class="block text-sm font-medium text-dark mb-1">版本号 <span class="text-red-500">*</span></label>
              <input type="text" id="appVersion" name="appVersion" class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary/50" placeholder="例如: 1.0.0">
            </div>
            
            <div>
              <label for="appCompatibility" class="block text-sm font-medium text-dark mb-1">兼容设备 <span class="text-red-500">*</span></label>
              <div class="flex flex-wrap gap-3 mt-2">
                <label class="inline-flex items-center">
                  <input type="checkbox" name="compatibility[]" value="android" class="form-checkbox h-5 w-5 text-primary rounded border-gray-300 focus:ring-primary">
                  <span class="ml-2 text-sm text-dark">Android</span>
                </label>
                <label class="inline-flex items-center">
                  <input type="checkbox" name="compatibility[]" value="windows" class="form-checkbox h-5 w-5 text-primary rounded border-gray-300 focus:ring-primary">
                  <span class="ml-2 text-sm text-dark">Windows</span>
                </label>
                <label class="inline-flex items-center">
                  <input type="checkbox" name="compatibility[]" value="macos" class="form-checkbox h-5 w-5 text-primary rounded border-gray-300 focus:ring-primary">
                  <span class="ml-2 text-sm text-dark">macOS</span>
                </label>
              </div>
            </div>
            
            <div>
              <label for="appContentRating" class="block text-sm font-medium text-dark mb-1">内容分级 <span class="text-red-500">*</span></label>
              <select id="appContentRating" name="appContentRating" class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary/50">
                <option value="">选择分级</option>
                <option value="everyone">所有人</option>
                <option value="everyone10">10岁以上</option>
                <option value="teen">13岁以上</option>
                <option value="mature">17岁以上</option>
                <option value="adult">成人</option>
              </select>
            </div>
            
            <div>
              <label for="appPrivacyPolicy" class="block text-sm font-medium text-dark mb-1">隐私政策链接 <span class="text-red-500">*</span></label>
              <input type="url" id="appPrivacyPolicy" name="appPrivacyPolicy" class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary/50" placeholder="输入隐私政策URL">
            </div>
            
            <div>
              <label for="appTerms" class="block text-sm font-medium text-dark mb-1">使用条款链接 <span class="text-red-500">*</span></label>
              <input type="url" id="appTerms" name="appTerms" class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary/50" placeholder="输入使用条款URL">
            </div>
          </div>
          
          <!-- 开发者信息 -->
          <div class="space-y-4">
            <h2 class="text-xl font-bold text-dark">开发者信息</h2>
            
            <div>
              <label for="developerName" class="block text-sm font-medium text-dark mb-1">开发者名称 <span class="text-red-500">*</span></label>
              <input type="text" id="developerName" name="developerName" class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary/50" placeholder="输入开发者名称">
            </div>
            
            <div>
              <label for="developerEmail" class="block text-sm font-medium text-dark mb-1">联系邮箱 <span class="text-red-500">*</span></label>
              <input type="email" id="developerEmail" name="developerEmail" class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary/50" placeholder="输入联系邮箱">
            </div>
            
            <div>
              <label for="developerWebsite" class="block text-sm font-medium text-dark mb-1">开发者网站</label>
              <input type="url" id="developerWebsite" name="developerWebsite" class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary/50" placeholder="输入开发者网站URL">
            </div>
          </div>
          
          <!-- 提交按钮 -->
          <div class="pt-4">
            <button type="submit" id="submitAppBtn" class="w-full bg-primary hover:bg-primary/90 text-white py-3 px-6 rounded-lg font-medium transition-colors flex items-center justify-center">
              <i class="fa fa-paper-plane mr-2"></i>
              提交应用
            </button>
          </div>
        </form>
      </div>
      
      <!-- 上传指南 -->
      <div class="bg-white rounded-2xl shadow-sm p-6">
        <h2 class="text-xl font-bold text-dark mb-4">上传指南</h2>
        
        <div class="space-y-4">
          <div class="flex">
            <div class="bg-primary/10 rounded-full w-8 h-8 flex items-center justify-center text-primary mr-3">
              <i class="fa fa-check"></i>
            </div>
            <div>
              <h3 class="font-medium text-dark">应用质量要求</h3>
              <p class="text-muted text-sm">确保你的应用功能完整、无明显漏洞，界面设计符合现代审美标准。</p>
            </div>
          </div>
          
          <div class="flex">
            <div class="bg-primary/10 rounded-full w-8 h-8 flex items-center justify-center text-primary mr-3">
              <i class="fa fa-check"></i>
            </div>
            <div>
              <h3 class="font-medium text-dark">内容合规</h3>
              <p class="text-muted text-sm">应用内容必须符合当地法律法规，不得包含色情、暴力、歧视等违规内容。</p>
            </div>
          </div>
          </div>
          
          <div class="flex">
            <div class="bg-primary/10 rounded-full w-8 h-8 flex items-center justify-center text-primary mr-3">
              <i class="fa fa-check"></i>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- 页脚 -->
  <footer class="bg-dark text-white pt-12 pb-6">
    <div class="container-lg">
      <div class="grid grid-cols-1 md:grid-cols-4 gap-8 mb-8">
        <div>
          <h3 class="text-xl font-bold mb-4">AppStore</h3>
          <p class="text-gray-400 mb-4">发现精彩应用，提升生活品质</p>
          <div class="flex space-x-4">
            <a href="#" class="text-gray-400 hover:text-white transition-colors">
              <i class="fa fa-facebook"></i>
            </a>
            <a href="#" class="text-gray-400 hover:text-white transition-colors">
              <i class="fa fa-twitter"></i>
            </a>
            <a href="#" class="text-gray-400 hover:text-white transition-colors">
              <i class="fa fa-instagram"></i>
            </a>
            <a href="#" class="text-gray-400 hover:text-white transition-colors">
              <i class="fa fa-youtube-play"></i>
            </a>
          </div>
        </div>
        
        <div>
          <h4 class="font-bold mb-4">快速链接</h4>
          <ul class="space-y-2">
            <li><a href="index.html" class="text-gray-400 hover:text-white transition-colors">首页</a></li>
            <li><a href="upload-app.html" class="text-gray-400 hover:text-white transition-colors">上传应用</a></li>
          </ul>
        </div>
    </div>
  </footer>

  <!-- 返回顶部按钮 -->
  <button id="backToTop" class="fixed bottom-6 right-6 bg-primary text-white w-12 h-12 rounded-full flex items-center justify-center shadow-lg opacity-0 invisible transition-all duration-300 hover:bg-primary/90">
    <i class="fa fa-angle-up text-xl"></i>
  </button>

  <script>
    // 返回顶部按钮
    const backToTopBtn = document.getElementById('backToTop');
    
    window.addEventListener('scroll', () => {
      if (window.scrollY > 300) {
        backToTopBtn.classList.remove('opacity-0', 'invisible');
        backToTopBtn.classList.add('opacity-100', 'visible');
      } else {
        backToTopBtn.classList.remove('opacity-100', 'visible');
        backToTopBtn.classList.add('opacity-0', 'invisible');
      }
    });
    
    backToTopBtn.addEventListener('click', () => {
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    });
    
    // 导航栏滚动效果
    const navbar = document.querySelector('nav');
    
    window.addEventListener('scroll', () => {
      if (window.scrollY > 50) {
        navbar.classList.add('shadow-md');
      } else {
        navbar.classList.remove('shadow-md');
      }
    });
    
    // 免费应用切换
    const appIsFreeCheckbox = document.getElementById('appIsFree');
    const appPriceInput = document.getElementById('appPrice');
    
    appIsFreeCheckbox.addEventListener('change', () => {
      if (appIsFreeCheckbox.checked) {
        appPriceInput.disabled = true;
        appPriceInput.value = '0.00';
      } else {
        appPriceInput.disabled = false;
        appPriceInput.value = '';
      }
    });
    
    // 上传区域交互
    const iconUploadArea = document.getElementById('iconUploadArea');
    const appFileUploadArea = document.getElementById('appFileUploadArea');
    const screenshotsUploadArea = document.getElementById('screenshotsUploadArea');
    
    // 为所有上传区域添加拖放事件
    [iconUploadArea, appFileUploadArea, screenshotsUploadArea].forEach(area => {
      ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
        area.addEventListener(eventName, preventDefaults, false);
      });
      
      function preventDefaults(e) {
        e.preventDefault();
        e.stopPropagation();
      }
      
      ['dragenter', 'dragover'].forEach(eventName => {
        area.addEventListener(eventName, highlight, false);
      });
      
      ['dragleave', 'drop'].forEach(eventName => {
        area.addEventListener(eventName, unhighlight, false);
      });
      
      function highlight() {
        area.classList.add('active');
      }
      
      function unhighlight() {
        area.classList.remove('active');
      }
      
      // 处理文件拖放
      area.addEventListener('drop', handleDrop, false);
      
      function handleDrop(e) {
        const dt = e.dataTransfer;
        const files = dt.files;
        
        if (area === iconUploadArea && files.length === 1) {
          handleIconFile(files[0]);
        } else if (area === appFileUploadArea && files.length === 1) {
          handleAppFile(files[0]);
        } else if (area === screenshotsUploadArea && files.length <= 5) {
          handleScreenshotFiles(files);
        }
      }
      
      // 点击上传区域触发文件选择
      area.addEventListener('click', () => {
        if (area === iconUploadArea) {
          document.getElementById('appIcon').click();
        } else if (area === appFileUploadArea) {
          document.getElementById('appFile').click();
        } else if (area === screenshotsUploadArea) {
          document.getElementById('appScreenshots').click();
        }
      });
    });
    
    // 处理应用图标上传
    document.getElementById('appIcon').addEventListener('change', function() {
      if (this.files && this.files[0]) {
        handleIconFile(this.files[0]);
      }
    });
    
    function handleIconFile(file) {
      // 验证文件类型
      if (!file.type.match('image.*')) {
        alert('请上传图片文件');
        return;
      }
      
      const reader = new FileReader();
      
      reader.onload = function(e) {
        const iconPreview = document.getElementById('iconPreview');
        const iconPreviewImg = document.getElementById('iconPreviewImg');
        
        iconPreviewImg.src = e.target.result;
        iconPreview.classList.remove('hidden');
        
        // 隐藏上传提示
        const uploadPrompt = iconUploadArea.querySelector('.flex');
        uploadPrompt.classList.add('hidden');
      }
      
      reader.readAsDataURL(file);
    }
    
    // 处理应用文件上传
    document.getElementById('appFile').addEventListener('change', function() {
      if (this.files && this.files[0]) {
        handleAppFile(this.files[0]);
      }
    });
    
    function handleAppFile(file) {
      // 验证文件类型
      const allowedExtensions = ['.apk', '.appx', '.msix', '.msi', '.pkg', '.dmg'];
      const fileExtension = file.name.slice((file.name.lastIndexOf('.') - 1 >>> 0) + 2).toLowerCase();
      
      if (!allowedExtensions.includes(`.${fileExtension}`)) {
        alert('请上传有效的应用文件 (.apk, .appx, .msix, .msi, .pkg, .dmg)');
        return;
      }
      
      const appFilePreview = document.getElementById('appFilePreview');
      const appFileName = document.getElementById('appFileName');
      
      appFileName.textContent = file.name;
      appFilePreview.classList.remove('hidden');
      
      // 隐藏上传提示
      const uploadPrompt = appFileUploadArea.querySelector('.flex');
      uploadPrompt.classList.add('hidden');
      
      // 模拟上传进度
      let progress = 0;
      const appFileProgress = document.getElementById('appFileProgress');
      const appFileStatus = document.getElementById('appFileStatus');
      
      const interval = setInterval(() => {
        progress += 5;
        appFileProgress.style.width = `${progress}%`;
        
        if (progress >= 100) {
          clearInterval(interval);
          appFileStatus.textContent = '上传完成';
        } else {
          appFileStatus.textContent = `上传中 ${progress}%`;
        }
      }, 200);
    }
    
    // 处理应用截图上传
    document.getElementById('appScreenshots').addEventListener('change', function() {
      if (this.files && this.files.length > 0) {
        handleScreenshotFiles(this.files);
      }
    });
    
    function handleScreenshotFiles(files) {
      // 验证文件数量
      if (files.length > 5) {
        alert('最多只能上传5张截图');
        return;
      }
      
      const screenshotsPreview = document.getElementById('screenshotsPreview');
      screenshotsPreview.innerHTML = '';
      
      for (let i = 0; i < files.length; i++) {
        const file = files[i];
        
        // 验证文件类型
        if (!file.type.match('image.*')) {
          alert(`第 ${i+1} 个文件不是图片，请上传图片文件`);
          continue;
        }
        
        const reader = new FileReader();
        
        reader.onload = function(e) {
          const screenshotContainer = document.createElement('div');
          screenshotContainer.className = 'relative';
          
          const img = document.createElement('img');
          img.src = e.target.result;
          img.alt = `应用截图 ${i+1}`;
          img.className = 'w-full h-32 object-cover rounded-lg';
          
          const removeBtn = document.createElement('button');
          removeBtn.className = 'absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity';
          removeBtn.innerHTML = '<i class="fa fa-times"></i>';
          removeBtn.onclick = function() {
            screenshotContainer.remove();
            if (screenshotsPreview.children.length === 0) {
              screenshotsPreview.classList.add('hidden');
              const uploadPrompt = screenshotsUploadArea.querySelector('.flex');
              uploadPrompt.classList.remove('hidden');
            }
          };
          
          screenshotContainer.appendChild(img);
          screenshotContainer.appendChild(removeBtn);
          screenshotsPreview.appendChild(screenshotContainer);
        }
        
        reader.readAsDataURL(file);
      }
      
      if (files.length > 0) {
        screenshotsPreview.classList.remove('hidden');
        
        // 隐藏上传提示
        const uploadPrompt = screenshotsUploadArea.querySelector('.flex');
        uploadPrompt.classList.add('hidden');
      }
    }
    
    // 表单提交处理
    document.getElementById('appUploadForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      // 验证表单
      const requiredFields = [
        'appName', 'appDescription', 'appCategory', 
        'appIcon', 'appFile', 'appVersion', 
        'appContentRating', 'appPrivacyPolicy', 
        'appTerms', 'developerName', 'developerEmail'
      ];
      
      let isValid = true;
      
      requiredFields.forEach(field => {
        const element = document.getElementById(field);
        
        if (element) {
          if (element.type === 'file') {
            if (!element.files || element.files.length === 0) {
              isValid = false;
              alert(`请上传${element.previousElementSibling.textContent.trim().replace(' *', '')}`);
            }
          } else if (!element.value.trim()) {
            isValid = false;
            alert(`请填写${element.previousElementSibling.textContent.trim().replace(' *', '')}`);
          }
        }
      });
      
      // 验证兼容设备至少选择一个
      const compatibilityCheckboxes = document.querySelectorAll('input[name="compatibility[]"]:checked');
      if (compatibilityCheckboxes.length === 0) {
        isValid = false;
        alert('请选择至少一种兼容设备');
      }
      
      // 验证截图至少上传一张
      const screenshots = document.getElementById('screenshotsPreview').children;
      if (screenshots.length === 0) {
        isValid = false;
        alert('请上传至少一张应用截图');
      }
      
      if (isValid) {
        // 显示提交成功消息
        alert('应用提交成功！');
        // 重置表单
        this.reset();
        // 隐藏所有预览
        document.getElementById('iconPreview').classList.add('hidden');
        document.getElementById('appFilePreview').classList.add('hidden');
        document.getElementById('screenshotsPreview').classList.add('hidden');
        // 显示上传提示
        [iconUploadArea, appFileUploadArea, screenshotsUploadArea].forEach(area => {
          const uploadPrompt = area.querySelector('.flex');
          uploadPrompt.classList.remove('hidden');
        });
      }
    });
  </script>
</body>
</html>